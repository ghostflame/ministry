var Fetcher = require( './main.js' );
var fetch   = new Fetcher( );
var util    = require( 'util' );

console.log( fetch.getOkCodes( ) );
fetch.setOkCodes( [ 200, 301, 404 ] );
console.log( fetch.getOkCodes( ) );
fetch.setCodeOk( 302, true );
console.log( fetch.getOkCodes( ) );
fetch.setCodeOk( 404, false );
console.log( fetch.getOkCodes( ) );

fetch.allowUnauthorized( true );

var opts = {
    host:     'grafana.skybet.net',
    port:     443,
    path:     '/',
    timeout:  5000,
    quiet:    false,
};

fetch.getSsl( opts, function( o, res, data ) {
    console.log( o );
    console.log( util.inspect( res, true, 1 ) );
    console.log( 'Data length', data.length );

    opts.host = 'stats.skybet.net';
    opts.path = "/fiveMinute.json\nTHIS BREAKS EVERYTHING";
    opts.port = 80;

    fetch.get( opts, function( o, res, data ) {
        var t = typeof data;
        console.log( 'Guess-json produced: ' + t );
    });
});
